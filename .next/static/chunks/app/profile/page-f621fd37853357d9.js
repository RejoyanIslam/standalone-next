(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4178],{1327:function(e,a,s){Promise.resolve().then(s.bind(s,8157))},3931:function(e,a,s){"use strict";s.d(a,{Al:function(){return c},DO:function(){return u},Gd:function(){return h},Kv:function(){return n},N$:function(){return d},OU:function(){return b},RJ:function(){return g},RZ:function(){return i},Zy:function(){return m},aT:function(){return x},kE:function(){return p},n$:function(){return o}});var r=s(1554),t=s(64),l=s(9222);let d=(0,t.hg)("auth/userRegister",async e=>{try{let a=await l.Z.post("".concat(r.Z,"/api/v1/auth/register"),e,{withCredentials:!0});return a.data}catch(e){throw Error(e.response.data.error.message)}}),o=(0,t.hg)("auth/userLogin",async e=>{let{router:a}=e;try{let s=await l.Z.post("".concat(r.Z,"/api/v1/auth/login"),{...e.data},{withCredentials:!0});return setTimeout(()=>{a.push("/profile")}),s.data}catch(e){throw Error(e.response.data.error.message)}}),n=(0,t.hg)("auth/userLogout",async()=>{try{let e=await l.Z.post("".concat(r.Z,"/api/v1/auth/logout"),{},{withCredentials:!0});return e.data}catch(e){throw Error(e.response.data.error.message)}}),i=(0,t.hg)("auth/loggedInUser",async()=>{try{let e=await l.Z.get("".concat(r.Z,"/api/v1/auth/me"),{withCredentials:!0});return e.data}catch(e){throw Error(e.response.data.error.message)}}),c=(0,t.hg)("auth/updateUserData",async e=>{try{let a=await l.Z.patch("".concat(r.Z,"/api/v1/users/").concat(e.id),e.data,{withCredentials:!0});return a.data}catch(e){throw Error(e.response.data.error.message)}}),u=(0,t.hg)("auth/updateUserPhoto",async e=>{let{userId:a}=Object.fromEntries(e);try{let s=await l.Z.patch("".concat(r.Z,"/api/v1/users/").concat(a),e,{withCredentials:!0});return s.data}catch(e){throw Error(e.response.data.error.message)}}),m=(0,t.hg)("auth/updateUserPassword",async e=>{try{let a=await l.Z.patch("".concat(r.Z,"/api/v1/users/password-update"),e,{withCredentials:!0});return a.data}catch(e){throw Error(e.response.data.error.message)}}),p=(0,t.hg)("auth/sendActiveCode",async e=>{try{let a=await l.Z.post("".concat(r.Z,"/api/v1/auth/resend-active-code"),e,{withCredentials:!0});return a.data}catch(e){throw Error(e.response.data.error.message)}}),h=(0,t.hg)("auth/activeAccount",async e=>{try{let a=await l.Z.post("".concat(r.Z,"/api/v1/auth/activate"),e,{withCredentials:!0});return a.data}catch(e){throw Error(e.response.data.error.message)}}),x=(0,t.hg)("auth/findAccount",async e=>{try{let a=await l.Z.post("".concat(r.Z,"/api/v1/auth/find-account"),e,{withCredentials:!0});return a.data}catch(e){throw Error(e.response.data.error.message)}}),g=(0,t.hg)("auth/passwordResetCodeSend",async e=>{try{let a=await l.Z.post("".concat(r.Z,"/api/v1/auth/password-reset-code"),e,{withCredentials:!0});return a.data}catch(e){throw Error(e.response.data.error.message)}}),b=(0,t.hg)("auth/passwordReset",async e=>{console.log(e);try{let a=await l.Z.post("".concat(r.Z,"/api/v1/auth/password-reset"),e,{withCredentials:!0});return a.data}catch(e){throw Error(e.response.data.error.message)}})},1210:function(e,a,s){"use strict";s.d(a,{Eo:function(){return n},nr:function(){return o}});var r=s(64),t=s(3931),l=s(7713);let d=(0,r.oM)({name:"auth",initialState:{user:null,error:null,message:null},reducers:{setMessageEmpty:e=>{e.message=null,e.error=null}},extraReducers:e=>{e.addCase(t.N$.rejected,(e,a)=>{e.error=a.error.message}).addCase(t.N$.fulfilled,(e,a)=>{e.message=a.payload.message}).addCase(t.n$.rejected,(e,a)=>{e.error=a.error.message}).addCase(t.n$.fulfilled,(e,a)=>{e.user=a.payload.data,e.message=a.payload.message,(0,l.setCookie)("token",a.payload.data.accessToken,{secure:!0,sameSite:"none"}),localStorage.setItem("user",JSON.stringify(a.payload.data))}).addCase(t.Kv.rejected,(e,a)=>{e.error=a.error.message}).addCase(t.Kv.fulfilled,(e,a)=>{e.user=null,e.message=a.payload.message,localStorage.removeItem("user"),(0,l.deleteCookie)("token",{secure:!0,sameSite:"none"})}).addCase(t.RZ.rejected,e=>{e.user=null}).addCase(t.RZ.fulfilled,(e,a)=>{e.user=a.payload.data,localStorage.setItem("user",JSON.stringify(a.payload.data))}).addCase(t.Al.rejected,(e,a)=>{e.error=a.error.message}).addCase(t.Al.fulfilled,(e,a)=>{e.user=a.payload.data,e.message=a.payload.message,localStorage.setItem("user",JSON.stringify(a.payload.data))}).addCase(t.DO.rejected,e=>{e.error="Something went wrong!."}).addCase(t.DO.fulfilled,(e,a)=>{e.user=a.payload.data,e.message="Photo updated successfully!",localStorage.setItem("user",JSON.stringify(a.payload.data))}).addCase(t.Zy.rejected,e=>{e.error="Something went wrong!."}).addCase(t.Zy.fulfilled,(e,a)=>{e.user=a.payload.data,e.message=a.payload.message}).addCase(t.kE.rejected,e=>{e.error="Something went wrong to send active code in your email!."}).addCase(t.kE.fulfilled,(e,a)=>{e.message=a.payload.message}).addCase(t.Gd.rejected,(e,a)=>{e.error=a.error.message}).addCase(t.Gd.fulfilled,(e,a)=>{e.message=a.payload.message}).addCase(t.aT.rejected,(e,a)=>{e.error=a.error.message}).addCase(t.aT.fulfilled,e=>{e.message="User found!"}).addCase(t.RJ.rejected,(e,a)=>{e.error=a.error.message}).addCase(t.RJ.fulfilled,(e,a)=>{e.message=a.payload.message}).addCase(t.OU.rejected,(e,a)=>{e.error=a.error.message}).addCase(t.OU.fulfilled,(e,a)=>{e.message=a.payload.message})}}),o=e=>e.auth,{setMessageEmpty:n}=d.actions;a.ZP=d.reducer},8157:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return y}});var r=s(7437),t=s(2265),l=s(3198),d=s(171),o=s(5003),n=s.n(o),i=s(1554),c=s(1210),u=s(3931),m=()=>{let e=(0,l.I0)(),{user:a,message:s,error:o}=(0,l.v9)(c.nr);return(0,t.useEffect)(()=>{o&&d.Am.error(o),e((0,c.Eo)())},[s,o,e]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("span",{className:" relative cursor-auto sm:w-fit w-full",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("figure",{className:" relative mb-2",children:(0,r.jsx)("span",{className:"relative inline-block",children:(0,r.jsx)("img",{src:"".concat(i.Z,"/public/images/users/").concat(null==a?void 0:a.user_photo),alt:"",className:"mx-auto rounded-full w-[200px] h-[200px] border-2 dark:border-slate-800"})})}),(0,r.jsxs)("label",{className:" text-[14px]  bg-violet-600 text-white p-3 rounded-sm cursor-pointer",children:[" ",(0,r.jsx)("input",{type:"file",onChange:s=>{let r=s.target.files[0],t=r.size/1e3;if(t>400)return n()("","File size must not exceed 400 KB","warning");n()({title:"Are you sure?",text:"You want to change your profile picture!",icon:"warning",buttons:!0,dangerMode:!0}).then(s=>{if(s){let s=new FormData;s.append("user_photo",r),s.append("userId",a._id),e((0,u.DO)(s)),n()("Poof! Your profile has been change ",{icon:"success"})}})},className:"hidden"})," ","Upload photo"," "]})]})})})},p=s(9150),h=s(8910),x=s(311),g=s(3159),b=s(2410),f=s(4606),w=s(1396),v=s.n(w),j=s(4033);function y(){var e,a,s;let[o,n]=(0,t.useState)(!1),[i,w]=(0,t.useState)(!1),[y,N]=(0,t.useState)({password:"",con_password:""}),k=e=>{N(a=>({...a,[e.target.name]:e.target.value}))};(0,j.useRouter)();let C=(0,l.I0)(),{message:Z,error:E,user:_}=(0,l.v9)(c.nr),S=async e=>(e.preventDefault(),y.password&&y.con_password)?y.password.length<6?(d.Am.error("Password can be at least 6 characters."),!1):y.password!==y.con_password?(d.Am.error("Password not match"),!1):void C((0,u.Zy)({password:y.password})):(d.Am.error("All field are required!"),!1);return(0,t.useEffect)(()=>{"Password updated successfully."==Z&&(document.getElementById("passwordChange").click(),N({password:"",con_password:""}),d.Am.success(Z)),E&&d.Am.error(E),C((0,c.Eo)())},[E,Z,C]),(0,r.jsxs)("section",{className:" bg-[#fff]   px-5 m-auto text-justify  text-[17px] py-10  theme-dark",children:[(0,r.jsxs)("div",{className:"lg:w-2/3 w-full mx-auto rounded-md bg-[#f2f5f9] dark:bg-[#172944] py-10 px-5",children:[(0,r.jsx)("div",{className:"photo relative px-3 ",children:(0,r.jsxs)("div",{className:"header sm:flex justify-between items-end  ",children:[(0,r.jsx)(m,{}),(0,r.jsxs)("div",{className:"space-x-2 sm:pt-0 pt-4 sm:block flex-wrap gap-3 flex justify-between items-center",children:[(0,r.jsx)("span",{className:"cursor-pointer bg-blue-500 gap-1 hover:bg-violet-500 inline-flex items-center py-2 rounded-md px-4 mt-2",onClick:()=>{document.getElementById("passwordChange").click()},children:(0,r.jsxs)("span",{className:"text-white sm:text-[16px] text-[13px]",children:[(0,r.jsx)(g.qau,{className:"text-white text-sm sm:text-[16px] inline-block"})," ","Password Change"]})}),(0,r.jsx)(v(),{className:"cursor-pointer bg-blue-500 gap-1 hover:bg-violet-500 inline-flex items-center py-2 rounded-md px-4",href:"/profile/edit",children:(0,r.jsxs)("span",{className:"text-white  sm:text-[16px] text-[13px]",children:[(0,r.jsx)(h.zmo,{className:"text-white sm:text-[16px] text-sm inline-block"})," ","Edit Profile"]})})]})]})})," ",(0,r.jsx)("br",{}),(0,r.jsx)("hr",{className:"h-1 border-[3px] dark:border-[#0f0826] border-[#dddcdc]"}),(0,r.jsx)("div",{className:"overflow-x-auto pt-5 text-black dark:text-[#c7cedc]",children:(0,r.jsx)("div",{className:"",children:(0,r.jsxs)("div",{className:"grid md:grid-cols-2 grid-cols-1 gap-4",children:[(0,r.jsx)("div",{className:" col-span-1 ",children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"font-semibold ",children:"Name:"}),(0,r.jsx)("input",{type:"text",className:"bg-white dark:bg-[#110b2a] w-full py-2 rounded-md px-4 ",disabled:!0,value:null==_?void 0:_.name})]})}),(0,r.jsx)("div",{className:" col-span-1 w-full space-y-1",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"font-semibold",children:"Email:"}),(0,r.jsx)("input",{type:"text",className:"bg-white dark:bg-[#110b2a] w-full py-2 rounded-md px-4",disabled:!0,value:null==_?void 0:_.email})]})}),(0,r.jsx)("div",{className:"space-y-1",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"inline-block font-semibold",children:"Mobile Number:"}),(0,r.jsx)("input",{type:"text",className:"bg-white dark:bg-[#110b2a] w-full py-2 rounded-md px-4",disabled:!0,value:null==_?void 0:_.mobile})]})}),(0,r.jsx)("div",{className:"space-y-1",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"inline-block font-semibold",children:"Blood Group:"}),(0,r.jsx)("input",{type:"text",className:"bg-white dark:bg-[#110b2a] w-full py-2 rounded-md px-4",disabled:!0,value:(null==_?void 0:_.blood_group)?null==_?void 0:_.blood_group:"null"})]})}),(0,r.jsx)("div",{className:"space-y-1",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"font-semibold",children:"Location:"}),(0,r.jsx)("input",{type:"text",className:"bg-white dark:bg-[#110b2a] w-full py-2 rounded-md px-4",disabled:!0,value:(null==_?void 0:_.location)?null==_?void 0:_.location:"null"})]})}),(0,r.jsx)("div",{className:"space-y-1",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"font-semibold",children:"Gender:"}),(0,r.jsx)("input",{type:"text",className:"bg-white dark:bg-[#110b2a] w-full py-2 rounded-md px-4",disabled:!0,value:null==_?void 0:_.gender})]})}),(0,r.jsx)("div",{className:"",children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"font-semibold",children:"Age:"}),(0,r.jsx)("input",{type:"text",className:"bg-white dark:bg-[#110b2a] w-full py-2 rounded-md px-4",disabled:!0,value:(null==_?void 0:_.age)?null==_?void 0:_.age:"null"})]})}),(0,r.jsx)("div",{className:"my-2 space-y-1 md:col-span-2",children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"font-semibold",children:"Feedback:"}),(0,r.jsx)("textarea",{disabled:!0,value:(null==_?void 0:_.feedback)?null==_?void 0:_.feedback:"null",className:"bg-white dark:bg-[#110b2a] w-full p-4 rounded-md"})]})}),(0,r.jsx)("div",{className:"",children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"inline-block font-semibold",children:"Social Link:"}),(0,r.jsxs)("div",{className:"flex gap-10 items-center",children:[(null==_?void 0:null===(e=_.social_media)||void 0===e?void 0:e.fb)&&(0,r.jsx)(v(),{className:"z-10",href:_.social_media.fb,target:"_blank",children:(0,r.jsx)(p.s5I,{className:"text-3xl"})}),(null==_?void 0:null===(a=_.social_media)||void 0===a?void 0:a.instagram)&&(0,r.jsx)(v(),{className:"z-10",href:_.social_media.fb,target:"_blank",children:(0,r.jsx)(p.Bpw,{className:"text-3xl"})}),(null==_?void 0:null===(s=_.social_media)||void 0===s?void 0:s.linkedIn)&&(0,r.jsx)(v(),{className:"z-10",href:_.social_media.linkedIn,target:"_blank",children:(0,r.jsx)(f.NQh,{className:"text-3xl "})})]})]})})]})})})]}),(0,r.jsx)("input",{type:"checkbox",id:"passwordChange",className:"modal-toggle"}),(0,r.jsx)("div",{className:"modal ",style:{backgroundColor:"rgba(30, 27, 40, 0.8)"},children:(0,r.jsxs)("div",{className:"modal-box relative bg-white dark:bg-[#160d39] text-black dark:text-[#c7cedc]",children:[(0,r.jsx)("label",{htmlFor:"passwordChange",className:"btn btn-sm btn-circle border-none absolute right-2 top-2 bg-zinc-300 hover:bg-zinc-400 dark:bg-[#16224f] dark:hover:bg-[#12235c]",children:(0,r.jsx)(x.$iT,{className:"text-zinc-900 text-xl font-bold  dark:text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:(0,r.jsx)("h1",{className:"font-bold text-center text-xl",children:"Update Password"})}),(0,r.jsxs)("form",{onSubmit:S,children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:o?"text":"password",name:"password",value:y.password,placeholder:"Enter new password",className:"mt-3 bg-white dark:border-[#103c3c] border dark:bg-[#00000075] border-gray-300 dark:text-[#91a3b8] text-sm rounded-lg focus:ring-0 focus:border-zinc-600 dark:focus:border-zinc-500 block w-full p-3 focus:outline-none",onChange:k}),(0,r.jsx)("span",{className:"absolute top-3 right-4  cursor-pointer",onClick:()=>{o?n(!1):n(!0)},children:y.password&&(o?(0,r.jsx)(b.qVU,{}):(0,r.jsx)(f.cqT,{}))})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:i?"text":"password",placeholder:"Confirm password",value:y.con_password,name:"con_password",className:"mt-3 bg-white dark:border-[#103c3c] border dark:bg-[#00000075] border-gray-300 dark:text-[#91a3b8] text-sm rounded-lg focus:ring-0 focus:border-zinc-600 dark:focus:border-zinc-500 block w-full p-3 focus:outline-none",onChange:k}),(0,r.jsx)("span",{className:"absolute top-3 right-4 cursor-pointer",onClick:()=>{i?w(!1):w(!0)},children:y.con_password&&(i?(0,r.jsx)(b.qVU,{}):(0,r.jsx)(f.cqT,{}))})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{type:"submit",value:"SUBMIT",className:"bg-blue-500 dark:bg-violet-600 py-[6px] px-4 rounded-md w-full font-semibold text-white ",children:"UPDATE"})})]})]})]})})]})}},1554:function(e,a,s){"use strict";s.d(a,{B:function(){return r}}),a.Z="https://kin-api.onrender.com";let r="https://www.kinsust.org"}},function(e){e.O(0,[8447,2400,1582,2420,3712,1787,3306,6566,6685,8427,9339,2971,596,1744],function(){return e(e.s=1327)}),_N_E=e.O()}]);