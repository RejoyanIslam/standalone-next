(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5439],{9352:function(e,t,r){Promise.resolve().then(r.bind(r,1246))},3931:function(e,t,r){"use strict";r.d(t,{Al:function(){return u},DO:function(){return l},Gd:function(){return m},Kv:function(){return c},N$:function(){return o},OU:function(){return x},RJ:function(){return f},RZ:function(){return i},Zy:function(){return g},aT:function(){return p},kE:function(){return h},n$:function(){return d}});var a=r(1554),s=r(64),n=r(9222);let o=(0,s.hg)("auth/userRegister",async e=>{try{let t=await n.Z.post("".concat(a.Z,"/api/v1/auth/register"),e,{withCredentials:!0});return t.data}catch(e){throw Error(e.response.data.error.message)}}),d=(0,s.hg)("auth/userLogin",async e=>{let{router:t}=e;try{let r=await n.Z.post("".concat(a.Z,"/api/v1/auth/login"),{...e.data},{withCredentials:!0});return setTimeout(()=>{t.push("/profile")}),r.data}catch(e){throw Error(e.response.data.error.message)}}),c=(0,s.hg)("auth/userLogout",async()=>{try{let e=await n.Z.post("".concat(a.Z,"/api/v1/auth/logout"),{},{withCredentials:!0});return e.data}catch(e){throw Error(e.response.data.error.message)}}),i=(0,s.hg)("auth/loggedInUser",async()=>{try{let e=await n.Z.get("".concat(a.Z,"/api/v1/auth/me"),{withCredentials:!0});return e.data}catch(e){throw Error(e.response.data.error.message)}}),u=(0,s.hg)("auth/updateUserData",async e=>{try{let t=await n.Z.patch("".concat(a.Z,"/api/v1/users/").concat(e.id),e.data,{withCredentials:!0});return t.data}catch(e){throw Error(e.response.data.error.message)}}),l=(0,s.hg)("auth/updateUserPhoto",async e=>{let{userId:t}=Object.fromEntries(e);try{let r=await n.Z.patch("".concat(a.Z,"/api/v1/users/").concat(t),e,{withCredentials:!0});return r.data}catch(e){throw Error(e.response.data.error.message)}}),g=(0,s.hg)("auth/updateUserPassword",async e=>{try{let t=await n.Z.patch("".concat(a.Z,"/api/v1/users/password-update"),e,{withCredentials:!0});return t.data}catch(e){throw Error(e.response.data.error.message)}}),h=(0,s.hg)("auth/sendActiveCode",async e=>{try{let t=await n.Z.post("".concat(a.Z,"/api/v1/auth/resend-active-code"),e,{withCredentials:!0});return t.data}catch(e){throw Error(e.response.data.error.message)}}),m=(0,s.hg)("auth/activeAccount",async e=>{try{let t=await n.Z.post("".concat(a.Z,"/api/v1/auth/activate"),e,{withCredentials:!0});return t.data}catch(e){throw Error(e.response.data.error.message)}}),p=(0,s.hg)("auth/findAccount",async e=>{try{let t=await n.Z.post("".concat(a.Z,"/api/v1/auth/find-account"),e,{withCredentials:!0});return t.data}catch(e){throw Error(e.response.data.error.message)}}),f=(0,s.hg)("auth/passwordResetCodeSend",async e=>{try{let t=await n.Z.post("".concat(a.Z,"/api/v1/auth/password-reset-code"),e,{withCredentials:!0});return t.data}catch(e){throw Error(e.response.data.error.message)}}),x=(0,s.hg)("auth/passwordReset",async e=>{console.log(e);try{let t=await n.Z.post("".concat(a.Z,"/api/v1/auth/password-reset"),e,{withCredentials:!0});return t.data}catch(e){throw Error(e.response.data.error.message)}})},1210:function(e,t,r){"use strict";r.d(t,{Eo:function(){return c},nr:function(){return d}});var a=r(64),s=r(3931),n=r(7713);let o=(0,a.oM)({name:"auth",initialState:{user:null,error:null,message:null},reducers:{setMessageEmpty:e=>{e.message=null,e.error=null}},extraReducers:e=>{e.addCase(s.N$.rejected,(e,t)=>{e.error=t.error.message}).addCase(s.N$.fulfilled,(e,t)=>{e.message=t.payload.message}).addCase(s.n$.rejected,(e,t)=>{e.error=t.error.message}).addCase(s.n$.fulfilled,(e,t)=>{e.user=t.payload.data,e.message=t.payload.message,(0,n.setCookie)("token",t.payload.data.accessToken,{secure:!0,sameSite:"none"}),localStorage.setItem("user",JSON.stringify(t.payload.data))}).addCase(s.Kv.rejected,(e,t)=>{e.error=t.error.message}).addCase(s.Kv.fulfilled,(e,t)=>{e.user=null,e.message=t.payload.message,localStorage.removeItem("user"),(0,n.deleteCookie)("token",{secure:!0,sameSite:"none"})}).addCase(s.RZ.rejected,e=>{e.user=null}).addCase(s.RZ.fulfilled,(e,t)=>{e.user=t.payload.data,localStorage.setItem("user",JSON.stringify(t.payload.data))}).addCase(s.Al.rejected,(e,t)=>{e.error=t.error.message}).addCase(s.Al.fulfilled,(e,t)=>{e.user=t.payload.data,e.message=t.payload.message,localStorage.setItem("user",JSON.stringify(t.payload.data))}).addCase(s.DO.rejected,e=>{e.error="Something went wrong!."}).addCase(s.DO.fulfilled,(e,t)=>{e.user=t.payload.data,e.message="Photo updated successfully!",localStorage.setItem("user",JSON.stringify(t.payload.data))}).addCase(s.Zy.rejected,e=>{e.error="Something went wrong!."}).addCase(s.Zy.fulfilled,(e,t)=>{e.user=t.payload.data,e.message=t.payload.message}).addCase(s.kE.rejected,e=>{e.error="Something went wrong to send active code in your email!."}).addCase(s.kE.fulfilled,(e,t)=>{e.message=t.payload.message}).addCase(s.Gd.rejected,(e,t)=>{e.error=t.error.message}).addCase(s.Gd.fulfilled,(e,t)=>{e.message=t.payload.message}).addCase(s.aT.rejected,(e,t)=>{e.error=t.error.message}).addCase(s.aT.fulfilled,e=>{e.message="User found!"}).addCase(s.RJ.rejected,(e,t)=>{e.error=t.error.message}).addCase(s.RJ.fulfilled,(e,t)=>{e.message=t.payload.message}).addCase(s.OU.rejected,(e,t)=>{e.error=t.error.message}).addCase(s.OU.fulfilled,(e,t)=>{e.message=t.payload.message})}}),d=e=>e.auth,{setMessageEmpty:c}=o.actions;t.ZP=o.reducer},1246:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var a=r(7437),s=r(1674),n=r(2265),o=r(4033),d=r(3198),c=r(1210),i=r(3931),u=r(171);function l(){let e=(0,d.I0)(),{message:t,error:r}=(0,d.v9)(c.nr),{count:l,time:g,setTime:h}=(0,s.Z)(290),m=(0,o.useSearchParams)(),p=(0,o.useRouter)(),f=e=>{e.target.value&&e.target.nextElementSibling?e.target.nextElementSibling.focus():(null==e?void 0:e.target.value)&&"Enter"===e.key&&e.target.nextElementSibling&&e.target.nextElementSibling.focus(),"Backspace"===e.key&&e.target.previousElementSibling&&e.target.previousElementSibling.focus()},x=async t=>{t.preventDefault();let r=new FormData(t.target),a=Object.fromEntries(r.entries()),s=[a.code1,a.code2,a.code3,a.code4],n=s.join("");e((0,i.Gd)({code:n})),t.target.reset()},y=async()=>{e((0,i.kE)({email:m.get("email")})),h(300)};return(0,n.useEffect)(()=>{t&&(u.Am.success(t),"Successfully activated your account."===t&&p.push("/login")),r&&u.Am.error(r),e((0,c.Eo)())},[t,r,e,p]),(0,a.jsx)("section",{className:"  bg-white py-16  dark:bg-[#151f32]  dark:text-[#cacfd5]",children:(0,a.jsx)("div",{className:" ",children:(0,a.jsx)("div",{className:"content-body     p-4 dark:border-zinc-700 border-zinc-300",children:(0,a.jsxs)("div",{className:" max-w-[460px] mx-auto h-fit  rounded-md dark:bg-[#182c49] bg-[#eceff1]",children:[(0,a.jsx)("div",{className:"content-header border-b p-4 dark:border-zinc-700 border-zinc-300",children:(0,a.jsx)("h1",{className:"text-[#3c4046] dark:text-[#cdd6e2] font-bold text-xl text-center",children:"Enter Security Code"})}),(0,a.jsxs)("div",{className:"content-body text-center   text-[#3c4046]  p-4 dark:border-zinc-700 border-zinc-300 dark:text-[#cdd6e2]",children:[(0,a.jsx)("p",{children:"Four digit security code sent to your Email."}),(0,a.jsx)("p",{className:"pt-2 flex justify-center",children:g?(0,a.jsxs)("span",{children:["Code Expired in : \xa0 ",l]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("span",{className:"text-red-500",children:"Expired!"})})}),(0,a.jsxs)("form",{className:"pb-1 pt-4  ",onSubmit:x,children:[(0,a.jsxs)("div",{className:"flex justify-between px-4 ",children:[(0,a.jsx)("input",{type:"text",maxLength:"1",name:"code1",className:"text-center z-10 text-2xl border w-16  rounded-sm h-16 dark:bg-[#0202246a] dark:text-[#cdd6dd] dark:border-zinc-700 border-zinc-300 focus:outline-none focus:border-zinc-600 focus:ring-0 bg-white",onKeyUp:f}),(0,a.jsx)("input",{type:"text",maxLength:"1",name:"code2",className:"text-center z-10 text-2xl border w-16  rounded-sm h-16 dark:bg-[#0202246a] dark:text-[#cdd6dd] dark:border-zinc-700 border-zinc-300 focus:outline-none focus:border-zinc-600 focus:ring-0 bg-white",onKeyUp:f}),(0,a.jsx)("input",{type:"text",maxLength:"1",name:"code3",className:"text-center z-10 text-2xl border w-16  rounded-sm h-16 dark:bg-[#0202246a] dark:text-[#cdd6dd] dark:border-zinc-700 border-zinc-300 focus:outline-none focus:border-zinc-600 focus:ring-0 bg-white",onKeyUp:f}),(0,a.jsx)("input",{type:"text",maxLength:"1",name:"code4",className:"text-center z-10 text-2xl border w-16  rounded-sm h-16 dark:bg-[#0202246a] dark:text-[#cdd6dd] dark:border-zinc-700 border-zinc-300 focus:outline-none focus:border-zinc-600 focus:ring-0 bg-white",onKeyUp:f})]}),(0,a.jsxs)("div",{className:"modal-action  pt-3 px-4 text-right",children:[!g&&(0,a.jsx)("span",{className:"flex items-center text-white py-1 px-2 cursor-pointer z-10 rounded-sm bg-blue-600 text-sm",onClick:y,children:"resend code"}),(0,a.jsx)("button",{type:"submit",className:"py-[6px] px-3 hover:bg-[#1068f5] rounded-md   z-10 text-white bg-[#0c51d2] ",children:"Submit"})]})]})]})]})})})})}},1554:function(e,t,r){"use strict";r.d(t,{B:function(){return a}}),t.Z="https://kin-api.onrender.com";let a="https://www.kinsust.org"},1674:function(e,t,r){"use strict";let{useState:a}=r(2265);t.Z=e=>{let[t,r]=a(e),s=setTimeout(()=>{r(t-1)},1e3);0===t&&clearTimeout(s);let n=Math.floor(60*Number("."+(t/3600).toString().split(".")[1]))||0,o=t%60<10?"0"+t%60:t%60;return{count:(n<10?"0"+n:n)+":"+o,time:t,setTime:r}}}},function(e){e.O(0,[3306,6566,8427,2971,596,1744],function(){return e(e.s=9352)}),_N_E=e.O()}]);