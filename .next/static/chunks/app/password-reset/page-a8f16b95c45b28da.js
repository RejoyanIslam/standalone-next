(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5178],{9566:function(e,t,r){Promise.resolve().then(r.bind(r,7563))},3931:function(e,t,r){"use strict";r.d(t,{Al:function(){return i},DO:function(){return u},Gd:function(){return m},Kv:function(){return c},N$:function(){return n},OU:function(){return w},RJ:function(){return g},RZ:function(){return l},Zy:function(){return h},aT:function(){return f},kE:function(){return p},n$:function(){return d}});var a=r(1554),s=r(64),o=r(9222);let n=(0,s.hg)("auth/userRegister",async e=>{try{let t=await o.Z.post("".concat(a.Z,"/api/v1/auth/register"),e,{withCredentials:!0});return t.data}catch(e){throw Error(e.response.data.error.message)}}),d=(0,s.hg)("auth/userLogin",async e=>{let{router:t}=e;try{let r=await o.Z.post("".concat(a.Z,"/api/v1/auth/login"),{...e.data},{withCredentials:!0});return setTimeout(()=>{t.push("/profile")}),r.data}catch(e){throw Error(e.response.data.error.message)}}),c=(0,s.hg)("auth/userLogout",async()=>{try{let e=await o.Z.post("".concat(a.Z,"/api/v1/auth/logout"),{},{withCredentials:!0});return e.data}catch(e){throw Error(e.response.data.error.message)}}),l=(0,s.hg)("auth/loggedInUser",async()=>{try{let e=await o.Z.get("".concat(a.Z,"/api/v1/auth/me"),{withCredentials:!0});return e.data}catch(e){throw Error(e.response.data.error.message)}}),i=(0,s.hg)("auth/updateUserData",async e=>{try{let t=await o.Z.patch("".concat(a.Z,"/api/v1/users/").concat(e.id),e.data,{withCredentials:!0});return t.data}catch(e){throw Error(e.response.data.error.message)}}),u=(0,s.hg)("auth/updateUserPhoto",async e=>{let{userId:t}=Object.fromEntries(e);try{let r=await o.Z.patch("".concat(a.Z,"/api/v1/users/").concat(t),e,{withCredentials:!0});return r.data}catch(e){throw Error(e.response.data.error.message)}}),h=(0,s.hg)("auth/updateUserPassword",async e=>{try{let t=await o.Z.patch("".concat(a.Z,"/api/v1/users/password-update"),e,{withCredentials:!0});return t.data}catch(e){throw Error(e.response.data.error.message)}}),p=(0,s.hg)("auth/sendActiveCode",async e=>{try{let t=await o.Z.post("".concat(a.Z,"/api/v1/auth/resend-active-code"),e,{withCredentials:!0});return t.data}catch(e){throw Error(e.response.data.error.message)}}),m=(0,s.hg)("auth/activeAccount",async e=>{try{let t=await o.Z.post("".concat(a.Z,"/api/v1/auth/activate"),e,{withCredentials:!0});return t.data}catch(e){throw Error(e.response.data.error.message)}}),f=(0,s.hg)("auth/findAccount",async e=>{try{let t=await o.Z.post("".concat(a.Z,"/api/v1/auth/find-account"),e,{withCredentials:!0});return t.data}catch(e){throw Error(e.response.data.error.message)}}),g=(0,s.hg)("auth/passwordResetCodeSend",async e=>{try{let t=await o.Z.post("".concat(a.Z,"/api/v1/auth/password-reset-code"),e,{withCredentials:!0});return t.data}catch(e){throw Error(e.response.data.error.message)}}),w=(0,s.hg)("auth/passwordReset",async e=>{console.log(e);try{let t=await o.Z.post("".concat(a.Z,"/api/v1/auth/password-reset"),e,{withCredentials:!0});return t.data}catch(e){throw Error(e.response.data.error.message)}})},1210:function(e,t,r){"use strict";r.d(t,{Eo:function(){return c},nr:function(){return d}});var a=r(64),s=r(3931),o=r(7713);let n=(0,a.oM)({name:"auth",initialState:{user:null,error:null,message:null},reducers:{setMessageEmpty:e=>{e.message=null,e.error=null}},extraReducers:e=>{e.addCase(s.N$.rejected,(e,t)=>{e.error=t.error.message}).addCase(s.N$.fulfilled,(e,t)=>{e.message=t.payload.message}).addCase(s.n$.rejected,(e,t)=>{e.error=t.error.message}).addCase(s.n$.fulfilled,(e,t)=>{e.user=t.payload.data,e.message=t.payload.message,(0,o.setCookie)("token",t.payload.data.accessToken,{secure:!0,sameSite:"none"}),localStorage.setItem("user",JSON.stringify(t.payload.data))}).addCase(s.Kv.rejected,(e,t)=>{e.error=t.error.message}).addCase(s.Kv.fulfilled,(e,t)=>{e.user=null,e.message=t.payload.message,localStorage.removeItem("user"),(0,o.deleteCookie)("token",{secure:!0,sameSite:"none"})}).addCase(s.RZ.rejected,e=>{e.user=null}).addCase(s.RZ.fulfilled,(e,t)=>{e.user=t.payload.data,localStorage.setItem("user",JSON.stringify(t.payload.data))}).addCase(s.Al.rejected,(e,t)=>{e.error=t.error.message}).addCase(s.Al.fulfilled,(e,t)=>{e.user=t.payload.data,e.message=t.payload.message,localStorage.setItem("user",JSON.stringify(t.payload.data))}).addCase(s.DO.rejected,e=>{e.error="Something went wrong!."}).addCase(s.DO.fulfilled,(e,t)=>{e.user=t.payload.data,e.message="Photo updated successfully!",localStorage.setItem("user",JSON.stringify(t.payload.data))}).addCase(s.Zy.rejected,e=>{e.error="Something went wrong!."}).addCase(s.Zy.fulfilled,(e,t)=>{e.user=t.payload.data,e.message=t.payload.message}).addCase(s.kE.rejected,e=>{e.error="Something went wrong to send active code in your email!."}).addCase(s.kE.fulfilled,(e,t)=>{e.message=t.payload.message}).addCase(s.Gd.rejected,(e,t)=>{e.error=t.error.message}).addCase(s.Gd.fulfilled,(e,t)=>{e.message=t.payload.message}).addCase(s.aT.rejected,(e,t)=>{e.error=t.error.message}).addCase(s.aT.fulfilled,e=>{e.message="User found!"}).addCase(s.RJ.rejected,(e,t)=>{e.error=t.error.message}).addCase(s.RJ.fulfilled,(e,t)=>{e.message=t.payload.message}).addCase(s.OU.rejected,(e,t)=>{e.error=t.error.message}).addCase(s.OU.fulfilled,(e,t)=>{e.message=t.payload.message})}}),d=e=>e.auth,{setMessageEmpty:c}=n.actions;t.ZP=n.reducer},7563:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var a=r(7437),s=r(2265),o=r(4606),n=r(2410),d=r(3198),c=r(1210),l=r(1674),i=r(4033),u=r(171),h=r(3931);function p(){let{count:e,time:t,setTime:r}=(0,l.Z)(0),p=(0,d.I0)(),{message:m,error:f}=(0,d.v9)(c.nr),g=(0,i.useSearchParams)(),w=(0,i.useRouter)(),[x,y]=(0,s.useState)({password:"",con_password:""}),[b,v]=(0,s.useState)(!1),C=e=>{y(t=>({...t,[e.target.name]:e.target.value}))},j=async()=>{let{password:e,con_password:t}=x;return e&&t?e.length<6?u.Am.error("Password must be 6 characters"):e!==t?u.Am.error("Password not match"):void(p((0,h.RJ)({email:g.get("email")})),v(!0),r(285)):u.Am.error("All field are required!")},[k,N]=(0,s.useState)(!1),[Z,E]=(0,s.useState)(!1),S=async()=>{p((0,h.RJ)({email:g.get("email")})),r(285)},[O,z]=(0,s.useState)(""),A=async()=>{p((0,h.OU)({email:g.get("email"),password:x.password,code:O}))};return(0,s.useEffect)(()=>{p((0,c.Eo)()),m&&(u.Am.success(m),"Successfully password updated."===m&&w.push("/login")),f&&u.Am.error(f)},[m,f,p,w]),(0,a.jsx)("section",{className:"  bg-white py-16 dark:bg-[#151f32]  dark:text-[#cacfd5]",children:(0,a.jsx)("div",{className:" ",children:(0,a.jsxs)("div",{className:"content-body     p-4 border-zinc-700",children:[(0,a.jsxs)("div",{className:" max-w-[460px] mx-auto  h-fit  rounded-md dark:bg-[#182c49] bg-[#eceff1]",children:[(0,a.jsx)("div",{className:"content-header border-b p-4 dark:border-zinc-700 border-zinc-300",children:(0,a.jsx)("h1",{className:"text-[#3c4046] dark:text-[#cdd6e2] font-bold text-xl text-center",children:"Password Change"})}),(0,a.jsxs)("div",{className:"content-body  text-[#3c4046]  p-4 border-zinc-700 dark:text-[#cdd6e2]",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:k?"text":"password",name:"password",value:x.password,placeholder:"Enter new password",className:"mt-3 bg-white dark:border-[#103c3c] border dark:bg-[#00000075] border-gray-300 dark:text-[#91a3b8] text-sm rounded-lg focus:ring-0 focus:border-zinc-600 dark:focus:border-zinc-500 block w-full p-3 focus:outline-none",onChange:C}),(0,a.jsx)("span",{className:"absolute top-3 right-4  cursor-pointer",onClick:()=>{k?N(!1):N(!0)},children:x.password&&(k?(0,a.jsx)(n.qVU,{}):(0,a.jsx)(o.cqT,{}))})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:Z?"text":"password",placeholder:"Confirm password",value:x.con_password,name:"con_password",className:"mt-3 bg-white dark:border-[#103c3c] border dark:bg-[#00000075] border-gray-300 dark:text-[#91a3b8] text-sm rounded-lg focus:ring-0 focus:border-zinc-600 dark:focus:border-zinc-500 block w-full p-3 focus:outline-none",onChange:C}),(0,a.jsx)("span",{className:"absolute top-3 right-4 cursor-pointer",onClick:()=>{Z?E(!1):E(!0)},children:x.con_password&&(Z?(0,a.jsx)(n.qVU,{}):(0,a.jsx)(o.cqT,{}))})]})]}),!b&&(0,a.jsx)("div",{className:"content-footer p-4 text-right flex",children:(0,a.jsx)("button",{className:"w-full z-10 text-[#ffffff] font-bold bg-[#9a7ff0] hover:bg-[#7161eb]  focus:outline-none focus:ring-0  rounded-lg text-sm mb-2  px-5 py-2.5 text-center",onClick:j,children:"SUBMIT"})})]}),b&&(0,a.jsxs)("div",{className:" max-w-[460px] mx-auto  h-fit  rounded-md dark:bg-[#22174b] bg-[#eceff1] mt-2",children:[(0,a.jsx)("div",{className:"content-body  text-[#3c4046]  p-4 border-zinc-700 dark:text-[#cdd6e2]",children:(0,a.jsxs)("div",{className:"relative ",children:[(0,a.jsx)("p",{className:"text-center",children:"A verification code sent to your email."}),(0,a.jsx)("p",{className:"pt-2 flex justify-center",children:t?(0,a.jsxs)("span",{children:["Code Expired in : \xa0 ",e]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-red-500",children:"Expired!"})," \xa0 \xa0 \xa0 \xa0",!t&&(0,a.jsx)("span",{className:"flex items-center py-1 px-2 text-white cursor-pointer rounded-sm bg-blue-600 text-sm",onClick:S,children:"resend code"})]})}),(0,a.jsx)("input",{type:"text",placeholder:"Security code",name:"code",className:"mt-3 bg-white dark:border-[#103c3c] border dark:bg-[#00000075] border-gray-300 dark:text-[#91a3b8]  rounded-lg focus:ring-0 focus:border-zinc-600 dark:focus:border-zinc-500 block w-full p-5 focus:outline-none  text-3xl text-center ".concat(O&&"tracking-[60px]"),max:"4",maxLength:"4",onChange:e=>{z(e.target.value)},value:O})]})}),(0,a.jsx)("div",{className:"content-footer p-4 text-right flex",children:(0,a.jsx)("button",{className:"w-full z-10 text-[#ffffff] font-bold bg-[#9a7ff0] hover:bg-[#7161eb]  focus:outline-none focus:ring-0  rounded-lg text-sm   px-5 py-2.5 text-center",onClick:A,disabled:4!==O.length,children:"UPDATE"})})]})]})})})}},1554:function(e,t,r){"use strict";r.d(t,{B:function(){return a}}),t.Z="https://kin-api.onrender.com";let a="https://www.kinsust.org"},1674:function(e,t,r){"use strict";let{useState:a}=r(2265);t.Z=e=>{let[t,r]=a(e),s=setTimeout(()=>{r(t-1)},1e3);0===t&&clearTimeout(s);let o=Math.floor(60*Number("."+(t/3600).toString().split(".")[1]))||0,n=t%60<10?"0"+t%60:t%60;return{count:(o<10?"0"+o:o)+":"+n,time:t,setTime:r}}},1172:function(e,t,r){"use strict";r.d(t,{w_:function(){return c}});var a=r(2265),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=a.createContext&&a.createContext(s),n=function(){return(n=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},d=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)0>t.indexOf(a[s])&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r};function c(e){return function(t){return a.createElement(l,n({attr:n({},e.attr)},t),function e(t){return t&&t.map(function(t,r){return a.createElement(t.tag,n({key:r},t.attr),e(t.child))})}(e.child))}}function l(e){var t=function(t){var r,s=e.attr,o=e.size,c=e.title,l=d(e,["attr","size","title"]),i=o||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,l,{className:r,style:n(n({color:e.color||t.color},t.style),e.style),height:i,width:i,xmlns:"http://www.w3.org/2000/svg"}),c&&a.createElement("title",null,c),e.children)};return void 0!==o?a.createElement(o.Consumer,null,function(e){return t(e)}):t(s)}}},function(e){e.O(0,[8447,2400,3306,6566,8427,2971,596,1744],function(){return e(e.s=9566)}),_N_E=e.O()}]);